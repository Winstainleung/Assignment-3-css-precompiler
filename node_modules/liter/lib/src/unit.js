"use strict";
var __assign = (this && this.__assign) || Object.assign || function(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
        s = arguments[i];
        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
            t[p] = s[p];
    }
    return t;
};
Object.defineProperty(exports, "__esModule", { value: true });
var baseNames = [
    'meter',
    'kilogram',
    'second',
    'ampere',
    'kelvin',
    'mole',
    'candela',
    'radian',
    'steradian',
];
var baseIndexes = {};
baseNames.forEach(function (name, i) { return baseIndexes[name] = i; });
var zeroTerm = baseNames.map(function (_) { return 0; });
function nameCombine(n1, n2) {
    var names = __assign({}, n1);
    for (var _i = 0, _a = Object.keys(n2); _i < _a.length; _i++) {
        var k = _a[_i];
        names[k] = (names[k] || 0) + n2[k];
    }
    return names;
}
function customTermsCombine(t1, t2) {
    var customTerms = undefined;
    if (!t1)
        return t2;
    if (!t2)
        return t1;
    for (var _i = 0, _a = Object.keys(t1).concat(Object.keys(t2)); _i < _a.length; _i++) {
        var t = _a[_i];
        var term = (t1[t] || 0) + (t2[t] || 0);
        if (term) {
            if (customTerms == null)
                customTerms = {};
            customTerms[t] = term;
        }
    }
    return customTerms;
}
var Unit = /** @class */ (function () {
    function Unit(terms, customTerms, name, m, mode) {
        if (name === void 0) { name = {}; }
        if (m === void 0) { m = [1, 0]; }
        if (mode === void 0) { mode = 'normal'; }
        this.terms = terms;
        this.customTerms = customTerms;
        this.name = name;
        this.m = m;
        this.mode = mode;
    }
    Unit.prototype.set = function (proto) {
        return new Unit(proto.terms || this.terms, proto.customTerms || this.customTerms, proto.name || this.name, proto.m || this.m, proto.mode || this.mode);
    };
    Unit.base = function (name) {
        var baseIndex = baseIndexes[name];
        var terms = zeroTerm;
        if (baseIndex != null) {
            terms = terms.slice();
            terms[baseIndex] = 1;
        }
        var customTerms = baseIndex == null ? (_a = {}, _a[name] = 1, _a) : undefined;
        return new Unit(terms, customTerms, (_b = {}, _b[name] = 1, _b));
        var _a, _b;
    };
    Unit.one = function (m0, m1) {
        if (m0 === void 0) { m0 = 1; }
        if (m1 === void 0) { m1 = 0; }
        return new Unit(zeroTerm, undefined, {}, [m0, m1]);
    };
    Unit.prototype.baseFormat = function () {
        var _a = this, terms = _a.terms, mode = _a.mode;
        var o = [];
        if (mode !== 'normal')
            o.push(mode);
        for (var i = 0; i < baseNames.length; ++i) {
            if (terms[i] === 1)
                o.push(baseNames[i]);
            else if (terms[i] !== 0)
                o.push(baseNames[i] + "^" + terms[i]);
        }
        if (this.customTerms) {
            for (var term in this.customTerms)
                if (this.customTerms[term] === 1)
                    o.push(term);
                else if (this.customTerms[term] !== 0)
                    o.push(term + "^" + this.customTerms[term]);
        }
        return o.join(' ');
    };
    Unit.prototype.nameFormat = function () {
        var _a = this, name = _a.name, m = _a.m;
        var o = [];
        for (var _i = 0, _b = Object.keys(name); _i < _b.length; _i++) {
            var k = _b[_i];
            if (name[k] === 1)
                o.push(k);
            else if (typeof (name[k]) === 'number' && name[k] !== 0)
                o.push(k + "^" + name[k].toString());
        }
        return o.join(' ');
    };
    Unit.prototype.termsKey = function () {
        if (!this.cachedTermsKey) {
            var key = this.terms.slice();
            if (this.customTerms) {
                for (var _i = 0, _a = Object.keys(this.customTerms).sort(); _i < _a.length; _i++) {
                    var term = _a[_i];
                    key.push(term);
                    key.push(this.customTerms[term]);
                }
            }
            this.cachedTermsKey = JSON.stringify(key);
        }
        return this.cachedTermsKey;
    };
    Unit.prototype.sameTerms = function (rhs) {
        for (var i = 0; i < baseNames.length; ++i) {
            if (this.terms[i] !== rhs.terms[i])
                return false;
        }
        if (this.customTerms) {
            if (!rhs.customTerms)
                return false;
            for (var _i = 0, _a = Object.keys(this.customTerms).concat(Object.keys(rhs.customTerms)); _i < _a.length; _i++) {
                var t = _a[_i];
                if ((this.customTerms[t] || 0) !== (rhs.customTerms[t] || 0))
                    return false;
            }
        }
        else {
            if (rhs.customTerms)
                return false;
        }
        return true;
    };
    Unit.prototype.isDimensionless = function () {
        return !this.customTerms && this.terms.every(function (t) { return t === 0; });
    };
    Unit.prototype.mul2 = function (rhs) {
        if (this.m[1] !== 0 || rhs.m[1] !== 0)
            throw new Error("Can't multiply offset units");
        var mode = this.mode;
        var terms = [];
        for (var i = 0; i < baseNames.length; ++i)
            terms[i] = this.terms[i] + rhs.terms[i];
        // if (terms.every(i => i == 0)) {
        //     mode = 'U/U';
        //     terms = this.terms;
        // }
        //assert(this.m[1] == 0 && rhs.m[1] == 0);
        var u = new Unit(terms, customTermsCombine(this.customTerms, rhs.customTerms), nameCombine(this.name, rhs.name), [this.m[0] * rhs.m[0], this.m[1] + rhs.m[1]], mode);
        // console.log(this, rhs);
        return [u,
            [1, -(this.m[1] + rhs.m[1])],
            [1, this.m[1]],
            [1, rhs.m[1]]];
    };
    Unit.prototype.mul = function () {
        var rest = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            rest[_i] = arguments[_i];
        }
        return rest.reduce(function (l, r) { return l.mul2(r)[0]; }, this);
    };
    Unit.prototype.div = function () {
        var rest = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            rest[_i] = arguments[_i];
        }
        return rest.reduce(function (l, r) { return l.mul2(r.inv())[0]; }, this);
    };
    Unit.prototype.inv = function () {
        if (this.m[1] !== 0)
            throw new Error("Can't invert offset units");
        var terms = [];
        var name = {};
        var customTerms;
        for (var i = 0; i < baseNames.length; ++i)
            terms[i] = -this.terms[i] || 0;
        for (var _i = 0, _a = Object.keys(this.name); _i < _a.length; _i++) {
            var k = _a[_i];
            name[k] = -this.name[k];
        }
        if (this.customTerms) {
            customTerms = {};
            for (var t in this.customTerms)
                customTerms[t] = -this.customTerms[t];
        }
        //assert(this.m[1] == 0);
        return new Unit(terms, customTerms, name, [1 / this.m[0], -this.m[1]]);
    };
    Unit.prototype.add = function (rhs, convert) {
        if (convert === void 0) { convert = false; }
        if (!this.sameTerms(rhs))
            throw new Error("Can not add <" + rhs.nameFormat() + "> to <" + this.nameFormat() + ">");
        if (!convert && this.m[1] !== 0 && rhs.m[1] !== 0)
            throw new Error("Can't add offset units");
        var lhs = this;
        var swap = false;
        if (lhs.m[1] === 0 && rhs.m[1] !== 0) {
            lhs = rhs;
            rhs = this;
            swap = true;
        }
        var scale = rhs.m[0] / lhs.m[0];
        // console.log('lhs', lhs, 'rhs', rhs);
        // console.log('scale', scale, 'm[1]', lhs.m[1], rhs.m[1]);
        var lm = [1, lhs.m[1]];
        var rm = [scale, scale * rhs.m[1]];
        return [lhs,
            [1, -lhs.m[1]],
            swap ? rm : lm,
            swap ? lm : rm];
    };
    Unit.prototype.delta = function () {
        var name = {};
        for (var n in this.name)
            name["delta_" + n] = this.name[n];
        return this.set({ name: name, m: [this.m[0], 0] });
    };
    Unit.prototype.sub = function (rhs) {
        if (!this.sameTerms(rhs))
            throw new Error("Can not subtract <" + rhs.nameFormat() + "> from <" + this.nameFormat() + ">");
        var scale = rhs.m[0] / this.m[0];
        if (this.m[1] === 0 && rhs.m[1] !== 0)
            throw new Error("Can't subtract offset from non-offset unit");
        var u = (this.m[1] !== 0 && rhs.m[1] !== 0) ? this.delta() : this;
        return [u,
            [1, -u.m[1]],
            [1, this.m[1]],
            [scale, scale * rhs.m[1]]];
    };
    Unit.prototype.rename = function (name) {
        return this.set({ name: (_a = {}, _a[name] = 1, _a) });
        var _a;
    };
    Unit.prototype.print = function () {
        console.log('This ', this.nameFormat());
        console.log('  base: ', this.baseFormat());
        console.log('  terms:', this.terms, this.customTerms);
        console.log('  m:    ', this.m);
    };
    Unit.prototype.inspect = function () {
        return "<Unit " + this.nameFormat() + ">";
    };
    return Unit;
}());
exports.Unit = Unit;
exports.baseUnits = {};
// console.log(baseNames);
// console.log(baseNames.length);
for (var i = 0; i < baseNames.length; ++i) {
    var terms = [];
    for (var j = 0; j < baseNames.length; ++j)
        terms[j] = (j === i) ? 1 : 0;
    exports.baseUnits[baseNames[i]] = Unit.base(baseNames[i]);
}
exports.baseUnits.one = Unit.one(1);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidW5pdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91bml0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxJQUFJLFNBQVMsR0FBRztJQUNaLE9BQU87SUFDUCxVQUFVO0lBQ1YsUUFBUTtJQUNSLFFBQVE7SUFDUixRQUFRO0lBQ1IsTUFBTTtJQUNOLFNBQVM7SUFDVCxRQUFRO0lBQ1IsV0FBVztDQUNkLENBQUM7QUFFRixJQUFJLFdBQVcsR0FBK0IsRUFBRyxDQUFDO0FBQ2xELFNBQVMsQ0FBQyxPQUFPLENBQUMsVUFBQyxJQUFJLEVBQUUsQ0FBQyxJQUFLLE9BQUEsV0FBVyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBckIsQ0FBcUIsQ0FBQyxDQUFDO0FBZ0J0RCxJQUFJLFFBQVEsR0FBa0IsU0FBUyxDQUFDLEdBQUcsQ0FBQyxVQUFBLENBQUMsSUFBSSxPQUFBLENBQUMsRUFBRCxDQUFDLENBQUMsQ0FBQztBQUVwRCxxQkFBcUIsRUFBWSxFQUFFLEVBQVk7SUFDM0MsSUFBSSxLQUFLLGdCQUFRLEVBQUUsQ0FBRSxDQUFDO0lBQ3RCLEtBQWMsVUFBZSxFQUFmLEtBQUEsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBZixjQUFlLEVBQWYsSUFBZTtRQUF4QixJQUFJLENBQUMsU0FBQTtRQUNOLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7S0FBQTtJQUN2QyxPQUFPLEtBQUssQ0FBQztBQUNqQixDQUFDO0FBRUQsNEJBQTRCLEVBQW9CLEVBQUUsRUFBb0I7SUFDbEUsSUFBSSxXQUFXLEdBQWdDLFNBQVMsQ0FBQztJQUN6RCxJQUFJLENBQUMsRUFBRTtRQUNILE9BQU8sRUFBRSxDQUFDO0lBQ2QsSUFBSSxDQUFDLEVBQUU7UUFDSCxPQUFPLEVBQUUsQ0FBQztJ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